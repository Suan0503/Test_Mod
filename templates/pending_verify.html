<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="utf-8">
    <title>æš«å­˜é©—è­‰åå–®</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
</head>
<body style="background:#f7f8fa;">
<!-- é£Ÿç‰©èªé¢¨æ ¼é¸å–® -->
<nav class="food-menu">
  <ul>
    <li><span class="food-icon">ğŸš</span> ä¸»é </li>
    <li><span class="food-icon">ğŸ¥Ÿ</span> æš«å­˜é©—è­‰</li>
    <li><span class="food-icon">ğŸµ</span> æ‰‹å‹•å¯©æ ¸</li>
    <li><span class="food-icon">ğŸ¡</span> æ’ç¨‹ç®¡ç†</li>
    <li><span class="food-icon">ğŸ²</span> ç®¡ç†å“¡å°ˆå€</li>
  </ul>
</nav>
<div class="container mt-5">
    <h2 class="mb-4 font-weight-bold" style="color:#222;">æš«å­˜é©—è­‰åå–®</h2>
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <div class="mt-3">
          {% for category, message in messages %}
            <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
              {{ message }}
              <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <script>
              setTimeout(function(){
                window.location.href = window.location.pathname;
              }, 1200);
            </script>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}
  {% if users %}
  <table class="table table-bordered bg-white">
    <thead class="thead-dark">
      <tr>
        <th>æš±ç¨±</th>
        <th>æ‰‹æ©Ÿ</th>
        <th>LINE ID</th>
        <th>LINEç”¨æˆ¶ID</th>
        <th>æ“ä½œ</th>
      </tr>
    </thead>
    <tbody>
    {% for u in users %}
      <tr>
    <td>{{ u.nickname }}</td>
    <td>{{ u.phone }}</td>
    <td>{{ u.line_id }}</td>
    <td>{{ u.line_user_id if u.line_user_id else 'ï¼ˆç¼ºå°‘ï¼‰' }}</td>
    <td>
      {% if u.line_user_id %}
      <form method="post" style="display:inline;">
      <input type="hidden" name="user_id" value="{{ u.user_id }}">
      <button type="submit" class="btn btn-success btn-sm">é€šéé©—è­‰</button>
      </form>
      {% else %}
      <button class="btn btn-secondary btn-sm" disabled>ç¼ºå°‘ LINEç”¨æˆ¶ID</button>
      {% endif %}
    </td>
      </tr>
    {% endfor %}
    </tbody>
  </table>
  <a href="/admin/" class="btn btn-outline-primary mt-3">è¿”å›ä¸»é¸å–®</a>
  <a href="/admin/pending_verify/" class="btn btn-outline-secondary mt-3 ml-2">æ‰‹å‹•åˆ·æ–°</a>
  {% else %}
  <div class="alert alert-info">ç›®å‰æ²’æœ‰å¡ä½çš„æš«å­˜é©—è­‰ç”¨æˆ¶ã€‚</div>
  <a href="/admin/" class="btn btn-outline-primary mt-3">è¿”å›ä¸»é¸å–®</a>
  {% endif %}
</div>
</body>
</html>