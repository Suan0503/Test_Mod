{% extends 'royal_base.html' %}
{% block body %}
<div style="display:flex;gap:2em;">
  <!-- å·¦åŠé‚Šè¡¨å–® -->
  <div style="width:40%;padding:2em;">
    <form action="/schedule" method="post" class="royal-card" style="min-width:320px;max-width:400px;">
      <div class="royal-title">æ–°å¢æ’ç­</div>
      <label for="new_girl">æ–°å¢å¦¹å¦¹ï¼š</label>
  <input type="text" name="new_girl" id="new_girl" placeholder="è«‹è¼¸å…¥å¦¹å¦¹åç¨±" class="royal-input">
      <br><br>
      <label for="time">æ™‚é–“ï¼š</label>
  <select name="time" id="time" required class="royal-input">
        {% for h in range(0,24) %}
        <option value="{{ '%02d' % h }}:00">{{ '%02d' % h }}:00</option>
        <option value="{{ '%02d' % h }}:30">{{ '%02d' % h }}:30</option>
        {% endfor %}
      </select>
      <br><br>
      <label for="girl">é¸æ“‡å¦¹å¦¹ï¼š</label>
  <select name="girl" id="girl" required class="royal-input">
        {% for name in girls %}
        <option value="{{ name }}">{{ name }}</option>
        {% endfor %}
      </select>
      <label for="plan">æ–¹æ¡ˆï¼š</label>
  <select name="plan" id="plan" required class="royal-input">
        <option value="40">40</option>
        <option value="60">60</option>

  <button type="submit" class="royal-btn" style="width:100%;margin-top:1em;">é€å‡º</button>
    </form>
  </div>
  <!-- å³åŠé‚Šç­è¡¨ -->
  <div class="royal-card" style="flex:1;min-width:320px;">
    <div class="royal-title">æ’ç­è¡¨</div>
    <table style="width:100%;border-radius:12px;color:#ffe082;">
      <tr style="background:#2d2350;">
        <th>å¦¹å¦¹</th>
        <th>æ™‚é–“</th>
        <th>é‡‘é¡</th>
        <th>æ–¹æ¡ˆ</th>
      </tr>
      {% extends 'royal_base.html' %}
      {% block body %}
      <div class="royal-card" style="max-width:600px;text-align:center;">
        <div class="royal-title">æ’ç­åŠŸèƒ½å·²é—œé–‰</div>
        <div style="color:#ffe082;">å¦‚éœ€æ¢å¾©è«‹è¯çµ¡ç®¡ç†å“¡ã€‚</div>
      </div>
      {% endblock %}
    let line = `ğŸ’—${name} ${nationInfo.emoji} ${nationInfo.lang}${room ? ' ('+room+')' : ''}`;
    let slots = [];
    const timesList = tr.querySelector('.times-list');
    if(timesList) {
      for(const timeRow of timesList.children) {
        const time = timeRow.querySelector('.time-select').value;
        const dur = timeRow.querySelector('.duration-select').value;
        if(time && dur) {
          slots.push(`${time}/${dur}`);
        }
      }
    }
    if (slots.length) {
      line += '\n' + slots.join('\n');
      result += line + '\n\n';
    }
  }
  document.getElementById('output-area').innerText = result.trim();
}
document.getElementById('schedule-table').addEventListener('input', getScheduleResult);
document.getElementById('schedule-table').addEventListener('change', getScheduleResult);
</script>
{% endblock %}